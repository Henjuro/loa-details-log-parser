{"version":3,"file":"log-lines.umd.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0, radix = 10) {\r\n  if (typeof intString === \"number\") {\r\n    if (isNaN(intString)) return defaultValue;\r\n    return intString;\r\n  }\r\n\r\n  let intNum: number;\r\n\r\n  try {\r\n    intNum = parseInt(intString, radix);\r\n    if (isNaN(intNum)) intNum = defaultValue;\r\n  } catch {\r\n    intNum = defaultValue;\r\n  }\r\n\r\n  return intNum;\r\n}\r\n","import { tryParseInt } from \"./util.js\";\r\n\r\nclass LogLine {\r\n  lineSplit: string[];\r\n  timestamp: Date;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    this.lineSplit = lineSplit;\r\n    this.timestamp = new Date(this.lineSplit[1]);\r\n  }\r\n}\r\n\r\n// logId = 0\r\nexport class LogMessage extends LogLine {\r\n  message: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.message = this.lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 1\r\nexport class LogInitEnv extends LogLine {\r\n  playerId: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.playerId = lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 2\r\nexport class LogPhaseTransition extends LogLine {\r\n  phaseCode: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.phaseCode = tryParseInt(lineSplit[2]);\r\n  }\r\n}\r\n\r\n// logId = 3\r\nexport class LogNewPc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  classId: number;\r\n  class: string;\r\n  gearScore: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.classId = tryParseInt(lineSplit[4]);\r\n    this.class = lineSplit[5] || \"UnknownClass\";\r\n    /* this.level = tryParseInt(lineSplit[6]); */\r\n    this.gearScore = lineSplit[7];\r\n    this.currentHp = tryParseInt(lineSplit[8]);\r\n    this.maxHp = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 4\r\nexport class LogNewNpc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    //this.npcId = tryParseInt(lineSplit[3]);\r\n    this.name = lineSplit[4] || \"Unknown Entity\";\r\n    this.currentHp = tryParseInt(lineSplit[5]);\r\n    this.maxHp = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 5\r\nexport class LogDeath extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  killerId: string;\r\n  killerName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.killerId = lineSplit[4];\r\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\r\n  }\r\n}\r\n\r\n// logId = 6\r\nexport class LogSkillStart extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n  }\r\n}\r\n\r\n// logId = 7\r\nexport class LogSkillStage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n  skillStage: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillStage = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 8\r\nexport class LogDamage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: number;\r\n  skillName: string;\r\n  skillEffectId: number;\r\n  skillEffect: string;\r\n  targetId: string;\r\n  targetName: string;\r\n  damage: number;\r\n  damageModifier: number;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = tryParseInt(lineSplit[4]);\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillEffectId = tryParseInt(lineSplit[6]);\r\n    this.skillEffect = lineSplit[7];\r\n    this.targetId = lineSplit[8];\r\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\r\n    this.damage = tryParseInt(lineSplit[10]);\r\n    this.damageModifier = tryParseInt(lineSplit[11], 0, 16);\r\n    this.currentHp = tryParseInt(lineSplit[12]);\r\n    this.maxHp = tryParseInt(lineSplit[13]);\r\n  }\r\n}\r\n\r\n// logId = 9\r\nexport class LogHeal extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  healAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.healAmount = tryParseInt(lineSplit[4]);\r\n    //this.currentHp = tryParseInt(lineSplit[5]);\r\n  }\r\n}\r\n\r\n// logId = 10\r\nexport class LogBuff extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  buffId: string;\r\n  buffName: string;\r\n  isNew: boolean;\r\n  sourceId: string;\r\n  sourceName: string;\r\n  shieldAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.buffId = lineSplit[4];\r\n    this.buffName = lineSplit[5];\r\n    this.isNew = lineSplit[6] == \"1\";\r\n    this.sourceId = lineSplit[7];\r\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\r\n    this.shieldAmount = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 11\r\nexport class LogCounterattack extends LogLine {\r\n  id: string;\r\n  name: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    /* this.targetId = lineSplit[4];\r\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\r\n  }\r\n}\r\n"],"names":["tryParseInt","intString","defaultValue","radix","isNaN","intNum","parseInt","_unused","lineSplit","this","timestamp","Date","LogMessage","_this","_LogLine","call","message","LogLine","_LogLine2","LogInitEnv","_this2","playerId","_inheritsLoose","_LogLine3","LogPhaseTransition","_this3","phaseCode","_LogLine4","LogNewPc","_this4","id","name","classId","gearScore","currentHp","maxHp","LogNewNpc","_LogLine5","_this5","LogDeath","_LogLine6","_this6","killerId","killerName","LogSkillStart","_this7","_LogLine7","skillId","skillName","LogSkillStage","_LogLine8","_this8","skillStage","_LogLine9","LogDamage","_this9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","LogHeal","_this10","_LogLine10","healAmount","LogBuff","_LogLine11","_this11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","LogCounterattack","_this12","_LogLine12"],"mappings":"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"}