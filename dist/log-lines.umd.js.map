{"version":3,"file":"log-lines.umd.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0, radix = 10) {\r\n  if (typeof intString === \"number\") {\r\n    if (isNaN(intString)) return defaultValue;\r\n    return intString;\r\n  }\r\n\r\n  let intNum: number;\r\n\r\n  try {\r\n    intNum = parseInt(intString, radix);\r\n    if (isNaN(intNum)) intNum = defaultValue;\r\n  } catch {\r\n    intNum = defaultValue;\r\n  }\r\n\r\n  return intNum;\r\n}\r\n","import { tryParseInt } from \"./util.js\";\r\n\r\nclass LogLine {\r\n  lineSplit: string[];\r\n  timestamp: Date;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    this.lineSplit = lineSplit;\r\n    this.timestamp = new Date(this.lineSplit[1]);\r\n  }\r\n}\r\n\r\n// logId = 0\r\nexport class LogMessage extends LogLine {\r\n  message: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.message = this.lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 1\r\nexport class LogInitEnv extends LogLine {\r\n  playerId: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.playerId = lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 2\r\nexport class LogPhaseTransition extends LogLine {\r\n  phaseCode: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.phaseCode = tryParseInt(lineSplit[2]);\r\n  }\r\n}\r\n\r\n// logId = 3\r\nexport class LogNewPc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  classId: number;\r\n  class: string;\r\n  gearScore: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.classId = tryParseInt(lineSplit[4]);\r\n    this.class = lineSplit[5] || \"UnknownClass\";\r\n    /* this.level = tryParseInt(lineSplit[6]); */\r\n    this.gearScore = lineSplit[7];\r\n    this.currentHp = tryParseInt(lineSplit[8]);\r\n    this.maxHp = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 4\r\nexport class LogNewNpc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    //this.npcId = tryParseInt(lineSplit[3]);\r\n    this.name = lineSplit[4] || \"Unknown Entity\";\r\n    this.currentHp = tryParseInt(lineSplit[5]);\r\n    this.maxHp = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 5\r\nexport class LogDeath extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  killerId: string;\r\n  killerName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.killerId = lineSplit[4];\r\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\r\n  }\r\n}\r\n\r\n// logId = 6\r\nexport class LogSkillStart extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n  }\r\n}\r\n\r\n// logId = 7\r\nexport class LogSkillStage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n  skillStage: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillStage = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 8\r\nexport class LogDamage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: number;\r\n  skillName: string;\r\n  skillEffectId: number;\r\n  skillEffect: string;\r\n  targetId: string;\r\n  targetName: string;\r\n  damage: number;\r\n  damageModifier: number;\r\n  isCrit: boolean;\r\n  isBackAttack: boolean;\r\n  isFrontAttack: boolean;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = tryParseInt(lineSplit[4]);\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillEffectId = tryParseInt(lineSplit[6]);\r\n    this.skillEffect = lineSplit[7];\r\n    this.targetId = lineSplit[8];\r\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\r\n    this.damage = tryParseInt(lineSplit[10]);\r\n    this.damageModifier = tryParseInt(lineSplit[11], 0, 16);\r\n    this.currentHp = tryParseInt(lineSplit[12]);\r\n    this.maxHp = tryParseInt(lineSplit[13]);\r\n  }\r\n}\r\n\r\n// logId = 9\r\nexport class LogHeal extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  healAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.healAmount = tryParseInt(lineSplit[4]);\r\n    //this.currentHp = tryParseInt(lineSplit[5]);\r\n  }\r\n}\r\n\r\n// logId = 10\r\nexport class LogBuff extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  buffId: string;\r\n  buffName: string;\r\n  isNew: boolean;\r\n  sourceId: string;\r\n  sourceName: string;\r\n  shieldAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.buffId = lineSplit[4];\r\n    this.buffName = lineSplit[5];\r\n    this.isNew = lineSplit[6] == \"1\";\r\n    this.sourceId = lineSplit[7];\r\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\r\n    this.shieldAmount = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 11\r\nexport class LogCounterattack extends LogLine {\r\n  id: string;\r\n  name: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    /* this.targetId = lineSplit[4];\r\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\r\n  }\r\n}\r\n"],"names":["tryParseInt","intString","defaultValue","radix","isNaN","intNum","parseInt","_unused","lineSplit","this","timestamp","LogMessage","_LogLine","_this","message","_inheritsLoose","LogLine","LogInitEnv","_this2","_LogLine2","call","playerId","LogPhaseTransition","_this3","_LogLine3","phaseCode","LogNewPc","_this4","_LogLine4","id","name","classId","gearScore","currentHp","maxHp","_LogLine5","LogNewNpc","_this5","LogDeath","_this6","killerId","killerName","_LogLine7","LogSkillStart","_this7","skillId","skillName","LogSkillStage","_LogLine8","_this8","skillStage","LogDamage","_this9","_LogLine9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","isCrit","isBackAttack","isFrontAttack","_LogLine10","LogHeal","_this10","healAmount","LogBuff","_this11","_LogLine11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","_LogLine12","LogCounterattack","_this12"],"mappings":"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"}