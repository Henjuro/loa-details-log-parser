{"version":3,"file":"log-lines.module.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0, radix = 10) {\r\n  if (typeof intString === \"number\") {\r\n    if (isNaN(intString)) return defaultValue;\r\n    return intString;\r\n  }\r\n\r\n  let intNum: number;\r\n\r\n  try {\r\n    intNum = parseInt(intString, radix);\r\n    if (isNaN(intNum)) intNum = defaultValue;\r\n  } catch {\r\n    intNum = defaultValue;\r\n  }\r\n\r\n  return intNum;\r\n}\r\n","import { tryParseInt } from \"./util.js\";\r\n\r\nclass LogLine {\r\n  lineSplit: string[];\r\n  timestamp: Date;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    this.lineSplit = lineSplit;\r\n    this.timestamp = new Date(this.lineSplit[1]);\r\n  }\r\n}\r\n\r\n// logId = 0\r\nexport class LogMessage extends LogLine {\r\n  message: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.message = this.lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 1\r\nexport class LogInitEnv extends LogLine {\r\n  playerId: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.playerId = lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 2\r\nexport class LogPhaseTransition extends LogLine {\r\n  phaseCode: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.phaseCode = tryParseInt(lineSplit[2]);\r\n  }\r\n}\r\n\r\n// logId = 3\r\nexport class LogNewPc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  classId: number;\r\n  class: string;\r\n  gearScore: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.classId = tryParseInt(lineSplit[4]);\r\n    this.class = lineSplit[5] || \"UnknownClass\";\r\n    /* this.level = tryParseInt(lineSplit[6]); */\r\n    this.gearScore = lineSplit[7];\r\n    this.currentHp = tryParseInt(lineSplit[8]);\r\n    this.maxHp = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 4\r\nexport class LogNewNpc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    //this.npcId = tryParseInt(lineSplit[3]);\r\n    this.name = lineSplit[4] || \"Unknown Entity\";\r\n    this.currentHp = tryParseInt(lineSplit[5]);\r\n    this.maxHp = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 5\r\nexport class LogDeath extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  killerId: string;\r\n  killerName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.killerId = lineSplit[4];\r\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\r\n  }\r\n}\r\n\r\n// logId = 6\r\nexport class LogSkillStart extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n  }\r\n}\r\n\r\n// logId = 7\r\nexport class LogSkillStage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n  skillStage: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillStage = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 8\r\nexport class LogDamage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: number;\r\n  skillName: string;\r\n  skillEffectId: number;\r\n  skillEffect: string;\r\n  targetId: string;\r\n  targetName: string;\r\n  damage: number;\r\n  damageModifier: number;\r\n  isCrit: boolean;\r\n  isBackAttack: boolean;\r\n  isFrontAttack: boolean;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = tryParseInt(lineSplit[4]);\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillEffectId = tryParseInt(lineSplit[6]);\r\n    this.skillEffect = lineSplit[7];\r\n    this.targetId = lineSplit[8];\r\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\r\n    this.damage = tryParseInt(lineSplit[10]);\r\n    this.damageModifier = tryParseInt(lineSplit[11], 0, 16);\r\n    this.isCrit = lineSplit[12] == \"1\";\r\n    this.isBackAttack = lineSplit[13] == \"1\";\r\n    this.isFrontAttack = lineSplit[14] == \"1\";\r\n    this.currentHp = tryParseInt(lineSplit[15]);\r\n    this.maxHp = tryParseInt(lineSplit[16]);\r\n  }\r\n}\r\n\r\n// logId = 9\r\nexport class LogHeal extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  healAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.healAmount = tryParseInt(lineSplit[4]);\r\n    //this.currentHp = tryParseInt(lineSplit[5]);\r\n  }\r\n}\r\n\r\n// logId = 10\r\nexport class LogBuff extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  buffId: string;\r\n  buffName: string;\r\n  isNew: boolean;\r\n  sourceId: string;\r\n  sourceName: string;\r\n  shieldAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.buffId = lineSplit[4];\r\n    this.buffName = lineSplit[5];\r\n    this.isNew = lineSplit[6] == \"1\";\r\n    this.sourceId = lineSplit[7];\r\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\r\n    this.shieldAmount = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 11\r\nexport class LogCounterattack extends LogLine {\r\n  id: string;\r\n  name: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    /* this.targetId = lineSplit[4];\r\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\r\n  }\r\n}\r\n"],"names":["tryParseInt","intString","defaultValue","radix","isNaN","intNum","parseInt","_unused","lineSplit","this","timestamp","Date","LogMessage","_LogLine","_this","message","_inheritsLoose","LogLine","LogInitEnv","_LogLine2","_this2","playerId","LogPhaseTransition","_LogLine3","_this3","call","phaseCode","LogNewPc","_LogLine4","_this4","id","name","classId","gearScore","currentHp","maxHp","LogNewNpc","_LogLine5","_this5","LogDeath","_LogLine6","_this6","killerId","killerName","LogSkillStart","_LogLine7","_this7","skillId","skillName","_LogLine8","LogSkillStage","_this8","skillStage","LogDamage","_this9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","isCrit","isBackAttack","isFrontAttack","LogHeal","_LogLine10","_this10","healAmount","_LogLine11","LogBuff","_this11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","LogCounterattack","_LogLine12","_this12"],"mappings":"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"}