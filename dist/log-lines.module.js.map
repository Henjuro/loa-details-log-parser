{"version":3,"file":"log-lines.module.js","sources":["../src/util.ts","../src/log-lines.ts"],"sourcesContent":["export function tryParseInt(intString: string, defaultValue = 0) {\r\n  if (typeof intString === \"number\") {\r\n    if (isNaN(intString)) return defaultValue;\r\n    return intString;\r\n  }\r\n\r\n  let intNum: number;\r\n\r\n  try {\r\n    intNum = parseInt(intString);\r\n    if (isNaN(intNum)) intNum = defaultValue;\r\n  } catch {\r\n    intNum = defaultValue;\r\n  }\r\n\r\n  return intNum;\r\n}\r\n","import { tryParseInt } from \"./util.js\";\r\n\r\nclass LogLine {\r\n  lineSplit: string[];\r\n  timestamp: Date;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    this.lineSplit = lineSplit;\r\n    this.timestamp = new Date(this.lineSplit[1]);\r\n  }\r\n}\r\n\r\n// logId = 0\r\nexport class LogMessage extends LogLine {\r\n  message: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.message = this.lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 1\r\nexport class LogInitEnv extends LogLine {\r\n  playerId: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.playerId = lineSplit[2];\r\n  }\r\n}\r\n\r\n// logId = 2\r\nexport class LogPhaseTransition extends LogLine {\r\n  phaseCode: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.phaseCode = tryParseInt(lineSplit[2]);\r\n  }\r\n}\r\n\r\n// logId = 3\r\nexport class LogNewPc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  classId: number;\r\n  class: string;\r\n  gearScore: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.classId = tryParseInt(lineSplit[4]);\r\n    this.class = lineSplit[5] || \"UnknownClass\";\r\n    /* this.level = tryParseInt(lineSplit[6]); */\r\n    this.gearScore = lineSplit[7];\r\n    this.currentHp = tryParseInt(lineSplit[8]);\r\n    this.maxHp = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 4\r\nexport class LogNewNpc extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    //this.npcId = tryParseInt(lineSplit[3]);\r\n    this.name = lineSplit[4] || \"Unknown Entity\";\r\n    this.currentHp = tryParseInt(lineSplit[5]);\r\n    this.maxHp = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 5\r\nexport class LogDeath extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  killerId: string;\r\n  killerName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.killerId = lineSplit[4];\r\n    this.killerName = lineSplit[5] || \"Unknown Entity\";\r\n  }\r\n}\r\n\r\n// logId = 6\r\nexport class LogSkillStart extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n  }\r\n}\r\n\r\n// logId = 7\r\nexport class LogSkillStage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: string;\r\n  skillName: string;\r\n  skillStage: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = lineSplit[4];\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillStage = tryParseInt(lineSplit[6]);\r\n  }\r\n}\r\n\r\n// logId = 8\r\nexport class LogDamage extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  skillId: number;\r\n  skillName: string;\r\n  skillEffectId: number;\r\n  skillEffect: string;\r\n  targetId: string;\r\n  targetName: string;\r\n  damage: number;\r\n  damageModifier: boolean;\r\n  isCrit: boolean;\r\n  isBackAttack: boolean;\r\n  isFrontAttack: boolean;\r\n  currentHp: number;\r\n  maxHp: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.skillId = tryParseInt(lineSplit[4]);\r\n    this.skillName = lineSplit[5] || \"Unknown Skill\";\r\n    this.skillEffectId = tryParseInt(lineSplit[6]);\r\n    this.skillEffect = lineSplit[7];\r\n    this.targetId = lineSplit[8];\r\n    this.targetName = lineSplit[9] || \"Unknown Entity\";\r\n    this.damage = tryParseInt(lineSplit[10]);\r\n    this.damageModifier = lineSplit[11] == \"1\";\r\n    this.isCrit = lineSplit[12] == \"1\";\r\n    this.isBackAttack = lineSplit[13] == \"1\";\r\n    this.isFrontAttack = lineSplit[14] == \"1\";\r\n    this.currentHp = tryParseInt(lineSplit[15]);\r\n    this.maxHp = tryParseInt(lineSplit[16]);\r\n  }\r\n}\r\n\r\n// logId = 9\r\nexport class LogHeal extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  healAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.healAmount = tryParseInt(lineSplit[4]);\r\n    //this.currentHp = tryParseInt(lineSplit[5]);\r\n  }\r\n}\r\n\r\n// logId = 10\r\nexport class LogBuff extends LogLine {\r\n  id: string;\r\n  name: string;\r\n  buffId: string;\r\n  buffName: string;\r\n  isNew: boolean;\r\n  sourceId: string;\r\n  sourceName: string;\r\n  shieldAmount: number;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    this.buffId = lineSplit[4];\r\n    this.buffName = lineSplit[5];\r\n    this.isNew = lineSplit[6] == \"1\";\r\n    this.sourceId = lineSplit[7];\r\n    this.sourceName = lineSplit[8] || \"Unknown Entity\";\r\n    this.shieldAmount = tryParseInt(lineSplit[9]);\r\n  }\r\n}\r\n\r\n// logId = 11\r\nexport class LogCounterattack extends LogLine {\r\n  id: string;\r\n  name: string;\r\n\r\n  constructor(lineSplit: string[]) {\r\n    super(lineSplit);\r\n\r\n    this.id = lineSplit[2];\r\n    this.name = lineSplit[3] || \"Unknown Entity\";\r\n    /* this.targetId = lineSplit[4];\r\n    this.targetName = lineSplit[5] || \"Unknown Entity\"; */\r\n  }\r\n}\r\n"],"names":["tryParseInt","intString","defaultValue","isNaN","intNum","parseInt","_unused","lineSplit","this","timestamp","LogMessage","_LogLine","_this","call","message","_inheritsLoose","LogLine","LogInitEnv","_LogLine2","_this2","playerId","LogPhaseTransition","_LogLine3","_this3","phaseCode","LogNewPc","_this4","_LogLine4","id","name","classId","gearScore","currentHp","maxHp","_LogLine5","LogNewNpc","_this5","LogDeath","_LogLine6","_this6","killerId","killerName","LogSkillStart","_LogLine7","_this7","skillId","skillName","LogSkillStage","_LogLine8","_this8","skillStage","LogDamage","_LogLine9","_this9","skillEffectId","skillEffect","targetId","targetName","damage","damageModifier","isCrit","isBackAttack","isFrontAttack","LogHeal","_LogLine10","_this10","healAmount","_LogLine11","LogBuff","_this11","buffId","buffName","isNew","sourceId","sourceName","shieldAmount","LogCounterattack","_LogLine12","_this12"],"mappings":"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"}